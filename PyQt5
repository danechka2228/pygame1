import sqlite3
from PyQt5.QtCore import Qt
from PyQt5.QtWidgets import (QApplication, QWidget, QPushButton, QVBoxLayout, QLabel, QHBoxLayout, QLineEdit, QListWidget)







def addtask1():
    b = a.text()
    if b:
        listLeft.addItem(b)
        a.clear()

def addtask2():
    b = a.text()
    if b:
        listRight.addItem(b)
        a.clear()


def create_db():
    connection = sqlite3.connect('dela.db')#подключение файла бд
    cursor = connection.cursor()#создание обьекта курсора
    cursor('''
    CREATE TABLE IF NOT EXISTS my_list (
    name TEXT,
    done INTEGER)
    ''')# создает новую таблицу my_list с полями нейм и доне если она не была создана ранее
    a = cursor.execute("SELECT name, done FROM my_list")#получение данных из бд
    # а - переменная, где хранятся пары значений название дела и индекс
    print(cursor.fetchall())
    for pair in a: # цикл проходится по последовасти
        if pair[1] == 0: #если индекс заметки равен 0 (проверяем второй элемент из пары)
            listLeft.addItem(pair[0])# добавление заметки в левый список(добавляем первый элемент из пары, то есть название дела)
        else:
            listRight.addItem(pair[0])# добавление заметки в правый список(добавляем первый элемент из пары, то есть название дела)
    connection.close()

def clear_all1():
    listLeft.clear()

def clear_all2():
    listRight.clear()

def dci():
    l = listLeft.currentRow()
    listLeft.takeItem(l)


def dci2():
    l = listRight.currentRow()
    listRight.takeItem(l)

def move_to_right():
   n = listLeft.currentRow()
   item = listLeft.takeItem(n)
   listRight.addItem(item)

def move_to_left():
   c = listRight.currentRow()
   item = listRight.takeItem(c)
   listLeft.addItem(item)



app = QApplication([])
main_win = QWidget()
main_win.resize(900, 600)
main_win.setWindowTitle('Список дел')
main_win.show()

button1 = QPushButton('удалить все')
button2 = QPushButton('удалить все')
button6 = QPushButton('удалить выбр. заметку')
button7 = QPushButton('удалить выбр. заметку')
button3 = QPushButton('Поместить в сделанное')
button4 = QPushButton('Поместить в список дел')

a = QLineEdit()
spisok1 = QLabel('сделано')
spisok2 = QLabel('cписок дел')
add = QLabel('новое дело:')
listLeft = QListWidget()
listRight = QListWidget()
add1 = QPushButton('Добавить')

v_line1 = QVBoxLayout()
v_line2 = QVBoxLayout()
v_line3 = QVBoxLayout()
main_line = QHBoxLayout()
h_line1 = QHBoxLayout()
h_line2 = QHBoxLayout()
h_line3 = QHBoxLayout()
# ЛC
v_line1.addWidget(spisok2)
v_line1.addWidget(listLeft)
h_line3.addWidget(button1)
h_line3.addWidget(button6)
v_line1.addLayout(h_line3)
v_line1.addWidget(add)
v_line1.addWidget(a)
v_line1.addWidget(add1)

v_line2.addWidget(spisok1)
v_line2.addWidget(listRight)
h_line2.addWidget(button2)
h_line2.addWidget(button7)
v_line2.addLayout(h_line2)


h_line1.addWidget(add)
h_line1.addWidget(a)

v_line3.addWidget(button3)
v_line3.addWidget(button4)


v_line3.addLayout(h_line1)
v_line3.addLayout(h_line2)


main_line.addLayout(v_line1)
main_line.addLayout(v_line3)  # ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad ddblad
main_line.addLayout(v_line2)

main_win.setLayout(main_line)
add1.clicked.connect(addtask1)
button1.clicked.connect(clear_all1)
button2.clicked.connect(clear_all2)
button6.clicked.connect(dci)
button7.clicked.connect(dci2)
button3.clicked.connect(move_to_right)
button4.clicked.connect(move_to_left)

app.exec_()
